<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Your Seats - EasyTravel</title>
    <link rel="stylesheet" href="../assets/css/style.css">
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <header class="header">
        <nav class="nav container">
            <a href="../index.html" class="logo">
                <img src="../assets/images/logo.png" alt="EasyTravel Logo">
                <span>EasyTravel</span>
            </a>
        </nav>
    </header>

    <main class="seat-selection-page">
        <div class="container">
            <div class="booking-header">
                <h1>Select Your Seats</h1>
                <div class="trip-details">
                    <div class="bus-info">
                        <h2 class="bus-name">General Express</h2>
                        <p class="route">Bamenda â†’ Douala</p>
                        <p class="departure">Departure: <span>06:30 AM</span></p>
                    </div>
                    <div class="date-info">
                        <p class="date">January 4, 2025</p>
                        <p class="duration">Duration: 5h</p>
                    </div>
                </div>
            </div>

            <div class="seat-selection-container">
                <div class="seat-map">
                    <div class="bus-layout">
                        <div class="driver-section">
                            <i class="fas fa-steering-wheel"></i>
                            <span>Driver</span>
                        </div>
                        <div class="seats-grid">
                            <!-- Seats will be dynamically generated here -->
                        </div>
                    </div>
                    <div class="seat-legend">
                        <div class="legend-item">
                            <div class="seat-demo available"></div>
                            <span>Available</span>
                        </div>
                        <div class="legend-item">
                            <div class="seat-demo selected"></div>
                            <span>Selected</span>
                        </div>
                        <div class="legend-item">
                            <div class="seat-demo occupied"></div>
                            <span>Occupied</span>
                        </div>
                    </div>
                </div>

                <div class="booking-summary">
                    <h3>Booking Summary</h3>
                    <div class="summary-details">
                        <div class="summary-item">
                            <span>Selected Seats:</span>
                            <span id="selectedSeatsDisplay">None</span>
                        </div>
                        <div class="summary-item">
                            <span>Price per seat:</span>
                            <span id="pricePerSeat">20,000 FCFA</span>
                        </div>
                        <div class="summary-item total">
                            <span>Total Amount:</span>
                            <span id="totalAmount">0 FCFA</span>
                        </div>
                    </div>
                    <button id="proceedToPayment" class="proceed-btn" disabled>
                        Proceed to Payment
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const seatsGrid = document.querySelector('.seats-grid');
            const selectedSeatsDisplay = document.getElementById('selectedSeatsDisplay');
            const totalAmountDisplay = document.getElementById('totalAmount');
            const proceedBtn = document.getElementById('proceedToPayment');
            const pricePerSeat = 20000; // Price in FCFA
            let selectedSeats = [];

            // Generate seats
            const rows = 8;
            const seatsPerRow = 4;
            const occupiedSeats = ['A1', 'B3', 'C4', 'F2']; // Example of pre-occupied seats

            for (let i = 0; i < rows; i++) {
                const row = document.createElement('div');
                row.className = 'seat-row';
                const rowLetter = String.fromCharCode(65 + i);

                for (let j = 0; j < seatsPerRow; j++) {
                    const seatNumber = rowLetter + (j + 1);
                    const seat = document.createElement('div');
                    seat.className = 'seat';
                    seat.dataset.seatNumber = seatNumber;
                    
                    if (occupiedSeats.includes(seatNumber)) {
                        seat.classList.add('occupied');
                    } else {
                        seat.classList.add('available');
                    }

                    // Add seat number
                    const seatLabel = document.createElement('span');
                    seatLabel.className = 'seat-label';
                    seatLabel.textContent = seatNumber;
                    seat.appendChild(seatLabel);

                    // Add click handler for available seats
                    if (!occupiedSeats.includes(seatNumber)) {
                        seat.addEventListener('click', () => toggleSeat(seat, seatNumber));
                    }

                    row.appendChild(seat);
                }
                seatsGrid.appendChild(row);
            }

            function toggleSeat(seat, seatNumber) {
                if (seat.classList.contains('occupied')) return;

                seat.classList.toggle('selected');
                
                if (seat.classList.contains('selected')) {
                    selectedSeats.push(seatNumber);
                } else {
                    selectedSeats = selectedSeats.filter(s => s !== seatNumber);
                }

                updateSummary();
            }

            function updateSummary() {
                if (selectedSeats.length > 0) {
                    selectedSeatsDisplay.textContent = selectedSeats.join(', ');
                    const total = selectedSeats.length * pricePerSeat;
                    totalAmountDisplay.textContent = `${total.toLocaleString()} FCFA`;
                    proceedBtn.disabled = false;
                } else {
                    selectedSeatsDisplay.textContent = 'None';
                    totalAmountDisplay.textContent = '0 FCFA';
                    proceedBtn.disabled = true;
                }
            }

            proceedBtn.addEventListener('click', () => {
                // Here we'll add the payment processing logic
                alert('Proceeding to payment for seats: ' + selectedSeats.join(', '));
            });
        });
    </script>
</body>
</html>
